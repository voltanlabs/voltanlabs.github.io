<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Voltanâ€™s Quest</title>
  <meta name="description" content="Choose-your-own-adventure featuring Voltan, guardian of the Voltaverse.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Roboto', sans-serif; }
    h1,h2,h3 { font-family: 'Orbitron', sans-serif; }
    .fade-enter { opacity: 0; transform: translateY(6px); }
    .fade-enter-active { opacity: 1; transform: translateY(0); transition: all .25s ease; }
    .btn { @apply w-full py-3 rounded-xl bg-[#007BFF] hover:bg-[#005FCC] text-white transition; }
  </style>
</head>
<body class="bg-[#1A1A1A] text-white min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-[#2C3E50] shadow-lg">
    <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3">
        <img src="images/voltanlabs_icon.png" alt="VoltanLabs" class="h-10 w-10">
        <h1 class="text-2xl font-bold">Voltanâ€™s Quest</h1>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="index.html" class="hover:text-[#FFD700]">Home</a>
        <a href="features.html" class="hover:text-[#FFD700]">Features</a>
        <a href="promptcraft.html" class="hover:text-[#FFD700]">PromptCraft</a>
      </nav>
    </div>
  </header>

  <!-- Game Container -->
  <main class="flex-1">
    <section class="max-w-3xl mx-auto px-4 py-8 md:py-12">
      <!-- HUD -->
      <div class="mb-6 flex items-center justify-between">
        <div class="text-sm text-white/80">Chapter: <span id="chapter" class="font-medium">1</span></div>
        <div class="flex items-center gap-3">
          <label class="flex items-center gap-2 text-sm">
            <input id="sfxToggle" type="checkbox" class="accent-[#FFD700]">
            SFX
          </label>
          <button id="restartBtn" class="px-3 py-1.5 rounded-lg bg-white/10 hover:bg-white/20 text-sm">Restart</button>
        </div>
      </div>

      <!-- Card -->
      <div id="card" class="bg-[#2C3E50] rounded-2xl shadow-lg overflow-hidden">
        <div class="p-6 md:p-8 space-y-4">
          <h2 id="title" class="text-2xl md:text-3xl font-bold text-[#FFD700]"></h2>
          <p id="text" class="text-lg leading-relaxed"></p>
          <div id="choices" class="mt-6 grid grid-cols-1 gap-3"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-[#2C3E50] text-center text-sm py-6">
    Â© 2025 VoltanLabs â€” VoltArcade Series
  </footer>

  <script>
  /* ========= Simple SFX (beep) ========= */
  function playBeep() {
    if (!document.getElementById('sfxToggle').checked) return;
    try {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'sine'; o.frequency.value = 520;
      o.connect(g); g.connect(ctx.destination);
      g.gain.setValueAtTime(0.0001, ctx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.05, ctx.currentTime + 0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.12);
      o.start(); o.stop(ctx.currentTime + 0.15);
    } catch (_) {}
  }

  /* ========= Story Data ========= */
  const STORY = {
    start: {
      chapter: 1,
      title: "Signal from the Voltaverse",
      text: "You are Voltan, guardian of the Voltaverse. A distress signal crackles through the aetherâ€” the Null King is siphoning energy from the city core. Do you surge in now or gather intel first?",
      choices: [
        { label: "Charge in âš¡", next: "plaza" },
        { label: "Gather intel ðŸ”Ž", next: "intel" }
      ]
    },
    plaza: {
      chapter: 2,
      title: "Storm at the Plaza",
      text: "You land in the central plaza. Null drones swarm, draining power from the grid. Sparks leap from your gauntlets as civilians scatter.",
      choices: [
        { label: "Arc burst attack", next: "minions_down" },
        { label: "Create shield and evacuate", next: "evac" }
      ]
    },
    intel: {
      chapter: 2,
      title: "The Hidden Weakness",
      text: "You trace the siphon signal to sub-channel 57. A weakness emerges: the Null Kingâ€™s core destabilizes near amplified resonance loops.",
      choices: [
        { label: "Build a resonance amplifier", next: "device" },
        { label: "Confront him with intel", next: "trap" }
      ]
    },
    device: {
      chapter: 3,
      title: "Resonance Device Online",
      text: "Your portable amplifier hums to life, harmonizing with the cityâ€™s grid. The air tastes like ozone.",
      choices: [
        { label: "Deploy at the plaza", next: "minions_down" },
        { label: "Track the Null King", next: "lair" }
      ]
    },
    minions_down: {
      chapter: 3,
      title: "Drones Disabled",
      text: "A radiant pulse explodes from your device. Drones clatter to the ground like rain. The grid steadies.",
      choices: [
        { label: "Pursue the Null King", next: "lair" },
        { label: "Stabilize the grid", next: "stabilize" }
      ]
    },
    evac: {
      chapter: 3,
      title: "Shield and Evacuate",
      text: "You raise a dome of crackling light, guiding civilians to safety. The Null Kingâ€™s signal intensifies.",
      choices: [
        { label: "Chase the source", next: "lair" },
        { label: "Hold position", next: "trap" }
      ]
    },
    lair: {
      chapter: 4,
      title: "The Null Lair",
      text: "Beneath the city, a cathedral of dead light. The Null King risesâ€” a silhouette of absence framed by stolen energy.",
      choices: [
        { label: "Overload with resonance", next: "victory" },
        { label: "Attempt a risky parley", next: "trap" }
      ]
    },
    stabilize: {
      chapter: 4,
      title: "Gridkeeper",
      text: "You channel power back into the city. Lights bloom. Cheers echo from distant towers. But the Null King slips away.",
      choices: [
        { label: "Hunt him down", next: "lair" }
      ]
    },
    trap: {
      chapter: 4,
      title: "Ambush",
      text: "A hush. Thenâ€” the floor fractures. Null cables whip up, binding your arms. Darkness surges.",
      choices: [
        { label: "Try again", next: "start" }
      ]
    },
    victory: {
      chapter: 5,
      title: "Voltaverse Restored",
      text: "Your resonance floods the chamber. The Null core shatters like black glass, energy rushing home. The city sings. For now, the Voltaverse is safe.",
      choices: [
        { label: "Play again", next: "start" }
      ]
    }
  };

  /* ========= State & Save ========= */
  const SAVE_KEY = "voltanquest_state_v1";
  function loadState() {
    try { return JSON.parse(localStorage.getItem(SAVE_KEY)) || { node: "start" }; }
    catch { return { node: "start" }; }
  }
  function saveState(node) {
    localStorage.setItem(SAVE_KEY, JSON.stringify({ node }));
  }

  /* ========= Rendering ========= */
  const titleEl = document.getElementById("title");
  const textEl = document.getElementById("text");
  const choicesEl = document.getElementById("choices");
  const chapterEl = document.getElementById("chapter");
  const cardEl = document.getElementById("card");
  const restartBtn = document.getElementById("restartBtn");

  function render(nodeKey) {
    const node = STORY[nodeKey] || STORY.start;
    chapterEl.textContent = node.chapter || "?";

    // transition
    cardEl.classList.add("fade-enter");
    requestAnimationFrame(() => {
      cardEl.classList.add("fade-enter-active");
      setTimeout(() => {
        cardEl.classList.remove("fade-enter", "fade-enter-active");
      }, 260);
    });

    titleEl.textContent = node.title;
    textEl.textContent = node.text;

    choicesEl.innerHTML = "";
    (node.choices || []).forEach((c) => {
      const btn = document.createElement("button");
      btn.className = "btn";
      btn.textContent = c.label;
      btn.addEventListener("click", () => {
        playBeep();
        saveState(c.next);
        render(c.next);
      });
      choicesEl.appendChild(btn);
    });
  }

  restartBtn.addEventListener("click", () => {
    playBeep();
    saveState("start");
    render("start");
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  // init
  const state = loadState();
  render(state.node || "start");
  </script>
</body>
</html>